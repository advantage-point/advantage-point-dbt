version: 2

sources:
  - name: web__tennisabstract
    schema: advpoint__ingest
    description: Data obtained from tennisabstract.com via web scraping.
    tables:
      - name: matches
        identifier: raw__web__tennisabstract__matches
        description: Contain matches that exist on the site.
        data_tests:
          - dbt_utils.unique_combination_of_columns:
            arguments:
              combination_of_columns:
                - match_url
                - audit_column__start_datetime_utc
          - one_true_per_id:
            id_column_array:
              - match_url
            active_flag_column: audit_column__active_flag

      - name: players
        identifier: raw__web__tennisabstract__players
        description: Contain players that exist on the site.
        data_tests:
          - dbt_utils.unique_combination_of_columns:
              arguments:
                combination_of_columns:
                  - player_url
                  - audit_column__start_datetime_utc
          - one_true_per_id:
              arguments:
                id_column_array:
                  - player_url
                active_flag_column: audit_column__active_flag

      - name: players_classic
        identifier: raw__web__tennisabstract__players_classic
        description: Contain players that exist on the site via the 'player classic page'.
        data_tests:
          - dbt_utils.unique_combination_of_columns:
              arguments:
                combination_of_columns:
                  - player_classic_url
                  - audit_column__start_datetime_utc
          - one_true_per_id:
              arguments:
                id_column_array:
                  - player_classic_url
                active_flag_column: audit_column__active_flag
        
      - name: tournaments
        identifier: raw__web__tennisabstract__tournaments
        description: Contain tournaments that exist on the site.
        data_tests:
          - dbt_utils.unique_combination_of_columns:
              arguments:
                combination_of_columns:
                  - tournament_url
                  - audit_column__start_datetime_utc
          - one_true_per_id:
              arguments:
                id_column_array:
                  - tournament_url
                active_flag_column: audit_column__active_flag